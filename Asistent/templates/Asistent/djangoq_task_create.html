{% extends 'base_tailwind.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="mb-8">
            <h1 class="text-4xl font-black text-white mb-2">{{ title }}</h1>
            <p class="text-xl text-gray-300">–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Django-Q</p>
        </div>
        
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        {% if messages %}
        <div class="mb-6 space-y-3">
            {% for message in messages %}
            <div class="{% if message.tags == 'success' %}bg-green-500/20 border-green-500{% elif message.tags == 'error' %}bg-red-500/20 border-red-500{% else %}bg-blue-500/20 border-blue-500{% endif %} border-l-4 px-6 py-4 rounded-lg backdrop-blur-md">
                <p class="text-white font-semibold">{{ message }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- –§–æ—Ä–º–∞ -->
        <div class="bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl overflow-hidden">
            <div class="bg-gradient-to-r from-green-600 to-emerald-700 px-8 py-6">
                <h2 class="text-2xl font-bold text-white flex items-center gap-3">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path>
                    </svg>
                    –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                </h2>
            </div>
            
            <form method="post" class="p-8 space-y-6">
                {% csrf_token %}
                
                <!-- –§—É–Ω–∫—Ü–∏—è -->
                <div>
                    <label for="func_name" class="block text-sm font-semibold text-white/90 mb-2">
                        –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è <span class="text-red-400">*</span>
                    </label>
                    <select id="func_name" 
                            name="func_name" 
                            required
                            class="w-full px-4 py-3 bg-white/10 border border-white/20 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        <option value="" class="bg-gray-800">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é --</option>
                        {% for func in available_functions %}
                        <option value="{{ func.value }}" class="bg-gray-800">{{ func.label }}</option>
                        {% endfor %}
                    </select>
                    <p class="mt-2 text-sm text-gray-400">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞</p>
                </div>
                
                <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ -->
                <div>
                    <label for="task_name" class="block text-sm font-semibold text-white/90 mb-2">
                        –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ <span class="text-red-400">*</span>
                    </label>
                    <input type="text" 
                           id="task_name" 
                           name="task_name" 
                           required
                           placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞"
                           class="w-full px-4 py-3 bg-white/10 border border-white/20 text-white placeholder-gray-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    <p class="mt-2 text-sm text-gray-400">–ü–æ–Ω—è—Ç–Ω–æ–µ –∏–º—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏</p>
                </div>
                
                <!-- –¢–∏–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div>
                    <label class="block text-sm font-semibold text-white/90 mb-3">–¢–∏–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <div class="space-y-3">
                        <label class="flex items-start gap-3 p-4 bg-white/5 rounded-lg cursor-pointer hover:bg-white/10 transition-colors">
                            <input type="radio" 
                                   name="schedule_type" 
                                   value="once" 
                                   checked
                                   onchange="toggleScheduleOptions()"
                                   class="mt-1 w-4 h-4 text-green-600 focus:ring-green-500">
                            <div class="flex-1">
                                <span class="block font-semibold text-white">–û–¥–∏–Ω —Ä–∞–∑</span>
                                <span class="block text-sm text-gray-400">–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ</span>
                            </div>
                        </label>
                        <label class="flex items-start gap-3 p-4 bg-white/5 rounded-lg cursor-pointer hover:bg-white/10 transition-colors">
                            <input type="radio" 
                                   name="schedule_type" 
                                   value="schedule"
                                   onchange="toggleScheduleOptions()"
                                   class="mt-1 w-4 h-4 text-green-600 focus:ring-green-500">
                            <div class="flex-1">
                                <span class="block font-semibold text-white">–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é</span>
                                <span class="block text-sm text-gray-400">–í—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏</span>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- –ò–Ω—Ç–µ—Ä–≤–∞–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
                <div id="schedule_options" style="display: none;">
                    <label for="minutes" class="block text-sm font-semibold text-white/90 mb-2">
                        –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤ –º–∏–Ω—É—Ç–∞—Ö)
                    </label>
                    <input type="number" 
                           id="minutes" 
                           name="minutes" 
                           value="60"
                           min="1"
                           max="10080"
                           class="w-full px-4 py-3 bg-white/10 border border-white/20 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                    <p class="mt-2 text-sm text-gray-400">–ó–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç (1-10080)</p>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ -->
                <div class="bg-blue-500/20 border border-blue-500/30 rounded-lg p-5">
                    <div class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-blue-300 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        <div class="flex-1">
                            <p class="font-semibold text-blue-200 mb-2">–í–∞–∂–Ω–æ:</p>
                            <ul class="space-y-2 text-sm text-blue-100">
                                <li class="flex items-start gap-2">
                                    <span class="text-blue-300">‚Ä¢</span>
                                    <span>–û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-blue-300">‚Ä¢</span>
                                    <span>–ó–∞–¥–∞—á–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –≤ Django-Q Schedule –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-blue-300">‚Ä¢</span>
                                    <span>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Django-Q –∫–ª–∞—Å—Ç–µ—Ä –∑–∞–ø—É—â–µ–Ω!</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div class="flex gap-4 pt-4">
                    <button type="submit" 
                            class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                    <a href="{% url 'asistent:djangoq_tasks_queued' %}" 
                       class="flex-1 px-6 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-md text-white font-semibold rounded-lg transition-colors border border-white/20 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        –û—Ç–º–µ–Ω–∞
                    </a>
                </div>
            </form>
        </div>
        
        <!-- –°–ø—Ä–∞–≤–∫–∞ -->
        <div class="mt-8 bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 overflow-hidden shadow-2xl">
            <div class="bg-gradient-to-r from-blue-600 to-cyan-700 px-8 py-4">
                <h3 class="text-xl font-bold text-white flex items-center gap-2">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
                    </svg>
                    –°–ø—Ä–∞–≤–∫–∞
                </h3>
            </div>
            <div class="p-8 space-y-6 text-white">
                <div>
                    <h4 class="font-semibold text-lg mb-3">–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li class="flex items-start gap-2">
                            <span class="text-green-400 mt-1">üîç</span>
                            <span><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Django-Q –∫–ª–∞—Å—Ç–µ—Ä–∞</strong> - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-purple-400 mt-1">‚úçÔ∏è</span>
                            <span><strong>–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç—å–∏</strong> - –∑–∞–ø—É—Å–∫–∞–µ—Ç AI-–º–æ–¥–µ—Ä–∞—Ü–∏—é —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-400 mt-1">ü§ñ</span>
                            <span><strong>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI-—Å—Ç–∞—Ç—å–∏</strong> - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é —Å –ø–æ–º–æ—â—å—é AI</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-yellow-400 mt-1">üìÖ</span>
                            <span><strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</strong> - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</span>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold text-lg mb-3">–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li class="flex items-start gap-2">
                            <span class="text-green-400">‚Üí</span>
                            <span><strong>–°—Ä–æ—á–Ω–∞—è –∑–∞–¥–∞—á–∞:</strong> –í—ã–±–µ—Ä–∏—Ç–µ "–û–¥–∏–Ω —Ä–∞–∑" –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-blue-400">‚Üí</span>
                            <span><strong>–†–µ–≥—É–ª—è—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞:</strong> –í—ã–±–µ—Ä–∏—Ç–µ "–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é" –∏ —É–∫–∞–∂–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
    </div>
</div>

<script>
function toggleScheduleOptions() {
    const scheduleType = document.querySelector('input[name="schedule_type"]:checked').value;
    const scheduleOptions = document.getElementById('schedule_options');
    
    if (scheduleType === 'schedule') {
        scheduleOptions.style.display = 'block';
    } else {
        scheduleOptions.style.display = 'none';
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    toggleScheduleOptions();
});
</script>
{% endblock %}
