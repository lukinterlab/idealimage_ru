============================================================================
–º—É–∂—á–∏–Ω–∞ –∏ –∂–µ–Ω—â–∏–Ω–∞, —Å –≤–Ω–µ—à–Ω–æ—Å—Ç—å—é –ª—é–¥–µ–π —è–≤–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–π —Ç–∏–ø–∞–∂ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞  {zodiac_sign}, –º–æ–¥–Ω—ã–µ  –æ–±—Ä–∞–∑—ã, –æ–¥–µ–∂–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–µ–∑–æ–Ω—É {season} –∏ –ø–æ–≥–æ–¥–µ –≤ –ú–æ—Å–∫–≤–µ –∏ —Ç–æ–∂–µ —Å—Ç–∏–ª—å –æ–¥–µ–∂–¥—ã —Ç–∞–∫–æ–π –≤ –∫–∞–∫–æ–π –ª—é–±—è—Ç –æ–¥–µ–≤–∞—Ç—å—Å—è –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞ {zodiac_sign} , —Å—Ç–æ—è—Ç –Ω–∞ —Ñ–æ–Ω–µ –≥–æ—Ä–æ–¥–∞ –ú–æ—Å–∫–≤—ã —Å –µ—ë –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏, –≤—Ä–µ–º—è –≥–æ–¥–∞ {season} –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –ø—Ä–∏—Ä–æ–¥–µ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–æ–π —Å–≤–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è.
===========================================
*********************************************
–ò–∑—É—á–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É,–ª–æ–≥–∏ –∏ –≤—Å—ë —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –∏ –æ–ø–∏—à–∏ –º–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å -–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ç—å–∏
 –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–º—Ç —à–∞–±–ª–æ–Ω–æ–≤- –ø–æ–¥—Ä–æ–±–Ω–æ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–Ω–æ –±–µ–∑ –ø–µ—Ä–µ—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è –∫–æ–¥–∞.
 —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π –æ—à–∏–±–∫–∏
 –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å 
*********************************************

‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
Asistent\management\commands\generate_all_horoscopes_now.py
–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤—Å–µ—Ö 12 –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤

‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
cd ~/domains/idealimage.ru
source .venv/python311/bin/activate
–û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ (—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π):
# python manage.py generate_all_horoscopes_now
–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏):
# python manage.py generate_all_horoscopes_now --dry-run
–° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
–° –∑–∞–¥–µ—Ä–∂–∫–æ–π 10 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–º–∏
# python manage.py generate_all_horoscopes_now --delay 10
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞
# python manage.py generate_all_horoscopes_now --template-id 44

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞:
–ü–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ 12 –∑–Ω–∞–∫–æ–≤ –∑–æ–¥–∏–∞–∫–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞–∫–∞:
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —á–µ—Ä–µ–∑ UniversalContentGenerator
–ü–∞—Ä—Å–∏—Ç –≥–æ—Ä–æ—Å–∫–æ–ø —Å horo.mail.ru
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
–°—Ä–∞–∑—É –ø—É–±–ª–∏–∫—É–µ—Ç –Ω–∞ —Å–∞–π—Ç–µ (—Å—Ç–∞—Ç—É—Å published)
–í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
======================================================================
  üîÆ –ì–ï–ù–ï–†–ê–¶–ò–Ø –ò –ü–£–ë–õ–ò–ö–ê–¶–ò–Ø –í–°–ï–• –ì–û–†–û–°–ö–û–ü–û–í
======================================================================
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∞–±–ª–æ–Ω: DAILY_HOROSCOPE_PROMPT (ID: 44)
üìã –ë—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤: 12
‚è±Ô∏è –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–º–∏: 5 —Å–µ–∫—É–Ω–¥[1/12] 
üîÆ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –¥–ª—è –û–≤–µ–Ω...   
‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ! Post ID: 1234   
üìù –ó–∞–≥–æ–ª–æ–≤–æ–∫: –û–≤–µ–Ω ‚Äî –≥–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ –∑–∞–≤—Ç—Ä–∞   
üîó URL: /blog/oven-goroskop-na-zavtra/[2/12] 
üîÆ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ä–æ—Å–∫–æ–ø–∞ –¥–ª—è –¢–µ–ª–µ—Ü...
‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
*******************************************************************************
–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö 12 –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00:

python manage.py setup_horoscope_daily_10am

–î–ª—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç –ø–æ –æ–¥–Ω–æ–º—É –∑–Ω–∞–∫—É):
python manage.py setup_horoscope_interval
–ü—Ä–æ–≤–µ—Ä–∫–∞:
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Django-Q –∑–∞–ø—É—â–µ–Ω: python manage.py qcluster
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ: /admin/Asistent/aischedule/
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Django-Q: /admin/django_q/schedule/
–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

======================================================================
  üîÆ –ù–ê–°–¢–†–û–ô–ö–ê –ï–ñ–ï–î–ù–ï–í–ù–û–ô –ì–ï–ù–ï–†–ê–¶–ò–ò –ì–û–†–û–°–ö–û–ü–û–í –í 10:00
======================================================================

üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–º–ø—Ç–∞...
‚úÖ –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ –Ω–∞–π–¥–µ–Ω: DAILY_HOROSCOPE_PROMPT (ID: 44)

üìÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...
INFO ‚ú® –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00 [cron 0 10 * * *]
INFO ‚ôªÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00 [cron 0 10 * * *]
INFO ‚ôªÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00 [cron 0 10 * * *]
INFO ‚ôªÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00 [cron 0 10 * * *]
‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00 (ID: 2)
   üìä –°—Ç–∞—Ç–µ–π –∑–∞ –∑–∞–ø—É—Å–∫: 12
   ‚è∞ –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: 10:00:00
   üìÖ –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: 2025-12-23 10:00:00+00:00

üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Django-Q...
======================================================================
  üîÑ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –†–ê–°–ü–ò–°–ê–ù–ò–ô
======================================================================

üìã –ù–∞–π–¥–µ–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π AI: 1

  ‚úì –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–æ: "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00" [cron 0 10 * * *]

üßπ –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π...

======================================================================
  ‚úÖ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê
======================================================================

‚ú® –°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö: 1
‚ôªÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ: 0
üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ: 0

üìä –ê–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –≤ Django-Q: 1

‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Django-Q

======================================================================
  ‚úÖ –ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê
======================================================================

üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
   - –ê–¥–º–∏–Ω–∫–∞: /admin/Asistent/aischedule/
   - Django-Q: /admin/django_q/schedule/

‚ö†Ô∏è –í–ê–ñ–ù–û: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Django-Q –∑–∞–ø—É—â–µ–Ω:
   python manage.py qcluster

üìù –î–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
   python manage.py generate_all_horoscopes_now
(python311) [j7642490@srv39-h-st idealimage.ru]$ 

–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
–ü–û–®–ê–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Django-Q (–∑–∞–ø—É—â–µ–Ω –ª–∏ –∫–ª–∞—Å—Ç–µ—Ä)
python manage.py monitor_djangoq

–ò–ª–∏ —á–µ—Ä–µ–∑ shell:

python manage.py shell
from django_q.models import Schedule, OrmQ
from django.utils import timezone

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
active = OrmQ.objects.filter(lock__isnull=False).count()
queued = OrmQ.objects.filter(lock__isnull=True).count()
print(f"‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á: {active}")
print(f"üìã –í –æ—á–µ—Ä–µ–¥–∏: {queued}")
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π Django-Q
schedules = Schedule.objects.filter(name__startswith='ai_schedule_')
print(f"üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–π –≤ Django-Q: {schedules.count()}")
for s in schedules:
    print(f"   - {s.name}: —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫ {s.next_run}")
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è AISchedule –≤ –ë–î
python manage.py shell
from Asistent.models import AISchedule
from django.utils import timezone
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ 10:00
schedule = AISchedule.objects.filter(
      name="–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00").first()
      if schedule:
          print(f"‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ: ID={schedule.id}")
          print(f"   –°—Ç–∞—Ç—É—Å: {'‚úÖ –ê–∫—Ç–∏–≤–Ω–æ' if schedule.is_active else '‚è∏Ô∏è –ù–µ–∞–∫—Ç–∏–≤–Ω–æ'}")    print(f"   –í—Ä–µ–º—è: {schedule.scheduled_time}")
          print(f"   Cron: {schedule.cron_expression}")
          print(f"   –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: {schedule.next_run}")
          print(f"   –°—Ç–∞—Ç–µ–π –∑–∞ –∑–∞–ø—É—Å–∫: {schedule.articles_per_run}")
          print(f"   –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞: {schedule.prompt_template.name if schedule.prompt_template else '–ù–µ—Ç'}")
      else:
          print("‚ùå –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ! –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python manage.py setup_horoscope_daily_10am")

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Django-Q
python manage.py sync_schedules --force
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
python manage.py shell
from django_q.models import Schedule
from Asistent.models import AISchedule
# –ù–∞—Ö–æ–¥–∏–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
ai_schedule = AISchedule.objects.filter(
    name="–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00"
).first()

if ai_schedule:
    # –ò—â–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ Django-Q
    dq_schedule = Schedule.objects.filter(
        name=f'ai_schedule_{ai_schedule.id}'
    ).first()
                                
    if dq_schedule:
        print(f"‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Django-Q")
        print(f"   Django-Q ID: {dq_schedule.id}")
        print(f"   –§—É–Ω–∫—Ü–∏—è: {dq_schedule.func}")
        print(f"   Cron: {dq_schedule.cron}")
        print(f"   –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: {dq_schedule.next_run}")
        print(f"   –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–π: {'–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ' if dq_schedule   repeats == -1 else dq_schedule.repeats}") 
    else:
        print("‚ùå –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Django-Q!")
        print("   –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python manage.py s--force")

4. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
python manage.py generate_all_horoscopes_now --dry-run
5. –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª check_horoscope_setup.py:
# check_horoscope_setup.py
from Asistent.models import AISchedule, PromptTemplate
from django_q.models import Schedule, OrmQ
from blog.models import Category
from django.utils import timezone

print("=" * 70)
print("  üîç –ü–†–û–í–ï–†–ö–ê –ù–ê–°–¢–†–û–ô–ö–ò –ì–û–†–û–°–ö–û–ü–û–í")
print("=" * 70)
print()

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–º–ø—Ç–∞
template = PromptTemplate.objects.filter(
      name="DAILY_HOROSCOPE_PROMPT",
      is_active=True
).first()
if template:
    print(f"‚úÖ –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞: {template.name} (ID: {template.id})")
else:    print("‚ùå –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ DAILY_HOROSCOPE_PROMPT –Ω–µ –Ω–∞–π–¥–µ–Ω!")

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
try:
    category = Category.objects.get(slug="intellektualnye-prognozy")
    print(f"‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.title}")
except Category.DoesNotExist:
    print("‚ùå –ö–∞—Ç–µ–≥–æ—Ä–∏—è intellektualnye-prognozy –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!")

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
schedule = AISchedule.objects.filter(
      name="–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00"
).first()

if schedule:
    print(f"‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ: ID={schedule.id}")
    print(f"   –°—Ç–∞—Ç—É—Å: {'‚úÖ –ê–∫—Ç–∏–≤–Ω–æ' if schedule.is_active else '‚è∏Ô∏è –ù–µ–∞–∫—Ç–∏–≤–Ω–æ'}")
    print(f"   –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: {schedule.next_run}")
else:
    print("‚ùå –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!")
    print("   –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python manage.py setup_horoscope_daily_10am")
    
# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Django-Q
if schedule:
    dq_schedule = Schedule.objects.filter(
        name=f'ai_schedule_{schedule.id}'
    ).first()
    
    if dq_schedule:
        print(f"‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Django-Q: ID={dq_schedule.id}")
        print(f"   –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫: {dq_schedule.next_run}")
    else:
        print("‚ùå –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Django-Q!")
        print("   –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python manage.py sync_schedules --force")

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ Django-Q
active = OrmQ.objects.filter(lock__isnull=False).count()
queued = OrmQ.objects.filter(lock__isnull=True).count()
print(f"üìä Django-Q: –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á={active}, –≤ –æ—á–µ—Ä–µ–¥–∏={queued}")
print()
print("=" * 70)

–ó–∞–ø—É—Å–∫:

python manage.py shell < check_horoscope_setup.py

6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
–†–∞—Å–ø–∏—Å–∞–Ω–∏—è AISchedule: https://idealimage.ru/admin/Asistent/aischedule/
–†–∞—Å–ø–∏—Å–∞–Ω–∏—è Django-Q: https://idealimage.ru/admin/django_q/schedule/
7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
# –õ–æ–≥–∏ Django-Qtail -f logs/qcluster.log
# –ò–ª–∏ –Ω–∞ Windowstype logs\qcluster.log
–ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

python manage.py shell -c "from Asistent.models import AISchedule;
 from django_q.models import Schedule;
  s = AISchedule.objects.filter(name='–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –≤ 10:00').first();
  print('‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:', s.id if s else '–ù–ï –ù–ê–ô–î–ï–ù–û');
  print('‚úÖ –ê–∫—Ç–∏–≤–Ω–æ:', s.is_active if s else False);
  print('‚úÖ –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫:', s.next_run if s else '–ù–µ—Ç');
  dq = Schedule.objects.filter(name=f'ai_schedule_{s.id}').first() if s else None;
  print('‚úÖ Django-Q:', '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ' if dq else '–ù–ï –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–ù–û')"


–ß–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨:
‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ AISchedule —Å–æ–∑–¥–∞–Ω–æ –∏ –∞–∫—Ç–∏–≤–Ω–æ
‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Django-Q
‚úÖ Django-Q –∫–ª–∞—Å—Ç–µ—Ä –∑–∞–ø—É—â–µ–Ω (–ø—Ä–æ—Ü–µ—Å—Å qcluster)
‚úÖ –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 10:00
‚úÖ –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ DAILY_HOROSCOPE_PROMPT —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω