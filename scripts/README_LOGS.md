# üìã –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ü–†–û–í–ï–†–ö–ï –õ–û–ì–û–í GIGACHAT

## üéØ –î–í–ê –°–ü–û–°–û–ë–ê –ü–†–û–°–ú–û–¢–†–ê –õ–û–ì–û–í

---

## –°–ü–û–°–û–ë 1: Django Management –ö–æ–º–∞–Ω–¥–∞ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
cd /path/to/idealimage.ru
source venv/bin/activate  # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è virtualenv
python manage.py view_gigachat_logs
```

### –ü—Ä–∏–º–µ—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (ERROR –∏ CRITICAL)
python manage.py view_gigachat_logs --level ERROR

# –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É "–ø—É—Å—Ç–æ–π –ø—É—Ç—å"
python manage.py view_gigachat_logs --search "–ø—É—Å—Ç–æ–π –ø—É—Ç—å"

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å (–≤–º–µ—Å—Ç–æ 24 —á–∞—Å–æ–≤)
python manage.py view_gigachat_logs --hours 1

# –¢–æ–ª—å–∫–æ 20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π
python manage.py view_gigachat_logs --limit 20

# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
python manage.py view_gigachat_logs --level ERROR --hours 2 --limit 10
```

### –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `--hours` | –°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥ –∏—Å–∫–∞—Ç—å | 24 |
| `--level` | –£—Ä–æ–≤–µ–Ω—å: DEBUG, INFO, WARNING, ERROR, CRITICAL | –≤—Å–µ |
| `--search` | –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ | –Ω–µ—Ç |
| `--limit` | –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø–∏—Å–µ–π | 50 |

---

## –°–ü–û–°–û–ë 2: SQL –ó–∞–ø—Ä–æ—Å—ã (–ü–†–Ø–ú–û–ô –î–û–°–¢–£–ü –ö –ë–î)

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL:

```bash
mysql -u your_username -p your_database_name
```

### –ì–æ—Ç–æ–≤—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã:

–§–∞–π–ª `scripts/check_gigachat_logs.sql` —Å–æ–¥–µ—Ä–∂–∏—Ç 10 –≥–æ—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

#### 1. –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 –ª–æ–≥–æ–≤ GigaChat:
```sql
SELECT 
    timestamp,
    level,
    message
FROM Asistent_systemlog
WHERE 
    timestamp >= DATE_SUB(NOW(), INTERVAL 24 HOUR)
    AND message LIKE '%gigachat%'
ORDER BY timestamp DESC
LIMIT 50;
```

#### 2. –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏:
```sql
SELECT 
    timestamp,
    level,
    message
FROM Asistent_systemlog
WHERE 
    timestamp >= DATE_SUB(NOW(), INTERVAL 24 HOUR)
    AND level IN ('ERROR', 'CRITICAL')
    AND message LIKE '%gigachat%'
ORDER BY timestamp DESC;
```

#### 3. –ü–æ–∏—Å–∫ "–ø—É—Å—Ç–æ–π –ø—É—Ç—å":
```sql
SELECT 
    timestamp,
    message
FROM Asistent_systemlog
WHERE 
    message LIKE '%–ø—É—Å—Ç–æ–π –ø—É—Ç—å%'
    OR message LIKE '%–≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π%'
ORDER BY timestamp DESC
LIMIT 20;
```

#### 4. –û—à–∏–±–∫–∏ 429 (Too Many Requests):
```sql
SELECT 
    timestamp,
    message
FROM Asistent_systemlog
WHERE 
    message LIKE '%429%'
    OR message LIKE '%Too Many Requests%'
ORDER BY timestamp DESC;
```

---

## üîç –ß–¢–û –ò–°–ö–ê–¢–¨ –í –õ–û–ì–ê–•

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

1. **"GigaChat –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –ø—É—Ç—å"** - —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω—É–ª–∞ None
2. **"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"** - –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã
3. **"–¢–∞–π–º–∞—É—Ç"** –∏–ª–∏ **"TimeoutError"** - –ø—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
4. **"429"** –∏–ª–∏ **"Too Many Requests"** - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
5. **"402"** –∏–ª–∏ **"balance"** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞
6. **"–ù–µ—Ç <img> —Ç–µ–≥–∞"** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç API
7. **"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"** - –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

---

## üìä –ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø –õ–û–ì–û–í

### –ù–æ—Ä–º–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—É—Å–ø–µ—Ö):
```
‚úÖ [INFO] üé® –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –§–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ...
‚úÖ [INFO] üìã –ó–∞–¥–∞—á–∞: image_generation ‚Üí –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: [GigaChat-Pro, ...]
‚úÖ [INFO] üîÑ –ü–æ–ø—ã—Ç–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GigaChat-Pro...
‚úÖ [INFO] üì• –û—Ç–≤–µ—Ç –æ—Ç GigaChat –ø–æ–ª—É—á–µ–Ω
‚úÖ [INFO] üÜî UUID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: abc123...
‚úÖ [INFO] üì• –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–∞—á–∞–Ω–æ, —Ä–∞–∑–º–µ—Ä: 250000 –±–∞–π—Ç
‚úÖ [INFO] ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ: images/2024/01/gigachat_...jpg
```

### –ü—Ä–æ–±–ª–µ–º–∞ - —Ç–∞–π–º–∞—É—Ç:
```
‚ö†Ô∏è [WARNING] ‚è≥ –¢–∞–π–º–∞—É—Ç 60s –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GigaChat-Pro (–ø–æ–ø—ã—Ç–∫–∞ 1)
‚ö†Ô∏è [WARNING] ‚è≥ –¢–∞–π–º–∞—É—Ç 90s –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GigaChat-Pro (–ø–æ–ø—ã—Ç–∫–∞ 2)
‚ö†Ô∏è [WARNING] ‚è≥ –¢–∞–π–º–∞—É—Ç 120s –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GigaChat-Pro (–ø–æ–ø—ã—Ç–∫–∞ 3)
‚ö†Ô∏è [WARNING] ‚õî –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è GigaChat-Pro –∏—Å—á–µ—Ä–ø–∞–Ω
‚ùå [ERROR] ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∏ —á–µ—Ä–µ–∑ –æ–¥–Ω—É –º–æ–¥–µ–ª—å
```

### –ü—Ä–æ–±–ª–µ–º–∞ - rate limit (429):
```
‚ö†Ô∏è [WARNING] 429 Too Many Requests
‚ö†Ô∏è [WARNING] –ê–∫—Ç–∏–≤–µ–Ω cooldown 300s –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

---

## üõ†Ô∏è –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### 1. –ï—Å–ª–∏ "–ø—É—Å—Ç–æ–π –ø—É—Ç—å" –∏–∑-–∑–∞ —Ç–∞–π–º–∞—É—Ç–∞:
- **–ü—Ä–∏—á–∏–Ω–∞:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–†–µ—à–µ–Ω–∏–µ:** –£–ø—Ä–æ—Å—Ç–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ –∫–æ–¥–µ

### 2. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 429:
- **–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç (–∞–∫—Ç–∏–≤–µ–Ω cooldown)

### 3. –ï—Å–ª–∏ –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã:
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–∏ GigaChat-Pro, –Ω–∏ Max, –Ω–∏ Lite –Ω–µ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å
- **–†–µ—à–µ–Ω–∏–µ:** 
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
  - –£–ø—Ä–æ—Å—Ç–∏—Ç–µ –ø—Ä–æ–º–ø—Ç
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### 4. –ï—Å–ª–∏ "–ù–µ—Ç <img> —Ç–µ–≥–∞":
- **–ü—Ä–∏—á–∏–Ω–∞:** API –≤–µ—Ä–Ω—É–ª —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–º–ø—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∏–∑–º–µ–Ω–∏—Ç–µ –µ–≥–æ

---

## üìû –ë–´–°–¢–†–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
```bash
python manage.py view_gigachat_logs --level ERROR --hours 1
```

### –®–∞–≥ 2: –ù–∞–π–¥–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É
```bash
python manage.py view_gigachat_logs --search "–ø—É—Å—Ç–æ–π –ø—É—Ç—å"
```

### –®–∞–≥ 3: –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
```bash
python manage.py view_gigachat_logs --hours 1 --limit 100
```

---

## üí° –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

```bash
# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç
python manage.py view_gigachat_logs --hours 0.5

# –¢–æ–ª—å–∫–æ WARNING –∏ –≤—ã—à–µ
python manage.py view_gigachat_logs --level WARNING

# –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞
python manage.py view_gigachat_logs --search "generate_and_save"

# –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª
python manage.py view_gigachat_logs --hours 24 > logs_export.txt
```

---

## üìß –î–õ–Ø –û–¢–ü–†–ê–í–ö–ò –í –ü–û–î–î–ï–†–ñ–ö–£

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã:

```bash
python manage.py view_gigachat_logs --level ERROR --hours 24 > error_report.txt
```

–§–∞–π–ª `error_report.txt` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞.
























