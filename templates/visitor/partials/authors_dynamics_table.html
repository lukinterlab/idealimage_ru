<!-- –¢–∞–±–ª–∏—Ü–∞ –¥–∏–Ω–∞–º–∏–∫–∏ (—Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏–º –∏ –ø—Ä–æ—à–ª—ã–º –º–µ—Å—è—Ü–µ–º) -->
<div class="p-6">
    <!-- –ò—Ç–æ–≥–æ–≤—ã–µ —Å—É–º–º—ã –¥–∏–Ω–∞–º–∏–∫–∏ -->
    <div class="grid grid-cols-7 gap-3 mb-6">
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–°—Ç–∞—Ç—å–∏</p>
            <p class="text-xl font-bold {% if totals.posts > 0 %}text-green-600 dark:text-green-400{% elif totals.posts < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-600 dark:text-gray-400{% endif %}">
                {% if totals.posts > 0 %}+{% endif %}{{ totals.posts }}
            </p>
        </div>
        <div class="bg-gradient-to-r from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</p>
            <p class="text-xl font-bold {% if totals.views > 0 %}text-green-600 dark:text-green-400{% elif totals.views < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-600 dark:text-gray-400{% endif %}">
                {% if totals.views > 0 %}+{% endif %}{{ totals.views }}
            </p>
        </div>
        <div class="bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–õ–∞–π–∫–∏</p>
            <p class="text-xl font-bold {% if totals.likes > 0 %}text-green-600 dark:text-green-400{% elif totals.likes < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-600 dark:text-gray-400{% endif %}">
                {% if totals.likes > 0 %}+{% endif %}{{ totals.likes }}
            </p>
        </div>
        <div class="bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</p>
            <p class="text-xl font-bold {% if totals.comments > 0 %}text-green-600 dark:text-green-400{% elif totals.comments < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-600 dark:text-gray-400{% endif %}">
                {% if totals.comments > 0 %}+{% endif %}{{ totals.comments }}
            </p>
        </div>
        <div class="bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–î–æ–Ω–∞—Ç—ã</p>
            <p class="text-xl font-bold {% if totals.donations > 0 %}text-green-600 dark:text-green-400{% elif totals.donations < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-600 dark:text-gray-400{% endif %}">
                {% if totals.donations > 0 %}+{% endif %}{{ totals.donations }}‚ÇΩ
            </p>
        </div>
        <div class="bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–ü–æ–¥–ø–∏—Å—á–∏–∫–∏</p>
            <p class="text-xl font-bold {% if totals.subscribers > 0 %}text-green-600 dark:text-green-400{% elif totals.subscribers < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-600 dark:text-gray-400{% endif %}">
                {% if totals.subscribers > 0 %}+{% endif %}{{ totals.subscribers }}
            </p>
        </div>
        <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-3 text-center">
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">–ü–æ–∫–∞–∑–∞–Ω–æ</p>
            <p class="text-xl font-bold text-green-600 dark:text-green-400">{{ stats.object_list|length }}</p>
        </div>
    </div>
    
    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤–µ—Ä—Ö -->
    {% if stats.has_other_pages %}
    <div class="mb-4 flex justify-center">
        <nav class="flex items-center gap-2">
            {% if stats.has_previous %}
            <a href="?page=1&per_page={{ per_page }}" class="px-3 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-primary hover:text-white transition-colors text-sm">–ü–µ—Ä–≤–∞—è</a>
            <a href="?page={{ stats.previous_page_number }}&per_page={{ per_page }}" class="px-3 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm">‚Üê –ù–∞–∑–∞–¥</a>
            {% else %}
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">–ü–µ—Ä–≤–∞—è</span>
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">‚Üê –ù–∞–∑–∞–¥</span>
            {% endif %}
            
            <span class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-bold text-sm">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ stats.number }} –∏–∑ {{ stats.paginator.num_pages }}
            </span>
            
            {% if stats.has_next %}
            <a href="?page={{ stats.next_page_number }}&per_page={{ per_page }}" class="px-3 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
            <a href="?page={{ stats.paginator.num_pages }}&per_page={{ per_page }}" class="px-3 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-primary hover:text-white transition-colors text-sm">–ü–æ—Å–ª–µ–¥–Ω—è—è</a>
            {% else %}
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">–í–ø–µ—Ä—ë–¥ ‚Üí</span>
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">–ü–æ—Å–ª–µ–¥–Ω—è—è</span>
            {% endif %}
        </nav>
    </div>
    <div class="mb-4 text-center text-sm text-gray-600 dark:text-gray-400">
        –ü–æ–∫–∞–∑–∞–Ω–æ {{ stats.start_index }}-{{ stats.end_index }} –∏–∑ {{ stats.paginator.count }} –∞–≤—Ç–æ—Ä–æ–≤
    </div>
    {% endif %}
    
    <!-- –¢–∞–±–ª–∏—Ü–∞ –¥–∏–Ω–∞–º–∏–∫–∏ -->
    <div class="overflow-x-auto">
        <table class="w-full authors-table" data-period="dynamics">
            <thead class="bg-gray-50 dark:bg-gray-700">
                <tr>
                    <th onclick="sortTable(this, 'author', 'dynamics')" class="sortable px-4 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –ê–≤—Ç–æ—Ä <span class="sort-indicator"></span>
                    </th>
                    <th onclick="sortTable(this, 'posts', 'dynamics')" class="sortable px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –°—Ç–∞—Ç—å–∏ <span class="sort-indicator"></span>
                    </th>
                    <th onclick="sortTable(this, 'views', 'dynamics')" class="sortable px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –ü—Ä–æ—Å–º–æ—Ç—Ä—ã <span class="sort-indicator"></span>
                    </th>
                    <th onclick="sortTable(this, 'likes', 'dynamics')" class="sortable px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –õ–∞–π–∫–∏ <span class="sort-indicator"></span>
                    </th>
                    <th onclick="sortTable(this, 'comments', 'dynamics')" class="sortable px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –ö–æ–º–º. <span class="sort-indicator"></span>
                    </th>
                    <th onclick="sortTable(this, 'donations', 'dynamics')" class="sortable px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –î–æ–Ω–∞—Ç—ã <span class="sort-indicator"></span>
                    </th>
                    <th onclick="sortTable(this, 'subscribers', 'dynamics')" class="sortable px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600">
                        –ü–æ–¥–ø. <span class="sort-indicator"></span>
                    </th>
                    <th class="px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider">
                        –ü—Ä–µ–º–∏—è
                    </th>
                    <th class="px-4 py-3 text-center text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider">
                        –î–µ–π—Å—Ç–≤–∏—è
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                {% for stat in stats %}
                <tr class="table-row hover:bg-gray-50 dark:hover:bg-gray-700 {% if stat.is_ai %}bg-purple-50 dark:bg-purple-900/20{% endif %}"
                    data-author="{{ stat.author.username|lower }}"
                    data-posts="{{ stat.posts_diff }}"
                    data-views="{{ stat.views_diff }}"
                    data-likes="{{ stat.likes_diff }}"
                    data-comments="{{ stat.comments_diff }}"
                    data-donations="{{ stat.donations_diff }}"
                    data-subscribers="{{ stat.subscribers_diff }}"
                    data-bonus="{{ stat.bonus|floatformat:0 }}">
                    <td class="px-4 py-3">
                        <div class="flex items-center space-x-2">
                            <img src="{{ stat.profile.get_avatar }}" 
                                 alt="{{ stat.author.username }}"
                                 class="w-8 h-8 rounded-full {% if stat.is_ai %}ring-2 ring-purple-500{% endif %}">
                            <div>
                                <div class="flex items-center space-x-1">
                                    <span class="font-medium text-gray-900 dark:text-white author-name">{{ stat.author.username }}</span>
                                    {% if stat.is_ai %}
                                    <span class="text-purple-600 dark:text-purple-400" title="AI-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç">ü§ñ</span>
                                    {% endif %}
                                </div>
                                {% if stat.profile.is_author %}
                                <span class="text-xs text-gray-500 dark:text-gray-400">–ê–≤—Ç–æ—Ä</span>
                                {% endif %}
                            </div>
                        </div>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.posts_diff > 0 %}text-green-600 dark:text-green-400{% elif stat.posts_diff < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-500{% endif %}">
                            {% if stat.posts_diff > 0 %}+{% endif %}{{ stat.posts_diff }}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.views_diff > 0 %}text-green-600 dark:text-green-400{% elif stat.views_diff < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-500{% endif %}">
                            {% if stat.views_diff > 0 %}+{% endif %}{{ stat.views_diff }}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.likes_diff > 0 %}text-green-600 dark:text-green-400{% elif stat.likes_diff < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-500{% endif %}">
                            {% if stat.likes_diff > 0 %}+{% endif %}{{ stat.likes_diff }}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.comments_diff > 0 %}text-green-600 dark:text-green-400{% elif stat.comments_diff < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-500{% endif %}">
                            {% if stat.comments_diff > 0 %}+{% endif %}{{ stat.comments_diff }}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.donations_diff > 0 %}text-green-600 dark:text-green-400{% elif stat.donations_diff < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-500{% endif %}">
                            {% if stat.donations_diff > 0 %}+{% endif %}{{ stat.donations_diff }}‚ÇΩ
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.subscribers_diff > 0 %}text-green-600 dark:text-green-400{% elif stat.subscribers_diff < 0 %}text-red-600 dark:text-red-400{% else %}text-gray-500{% endif %}">
                            {% if stat.subscribers_diff > 0 %}+{% endif %}{{ stat.subscribers_diff }}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="font-semibold {% if stat.bonus > 0 %}text-green-600 dark:text-green-400{% else %}text-gray-500{% endif %}">
                            {{ stat.bonus }}‚ÇΩ
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <div class="flex justify-center space-x-1">
                            <a href="{% url 'Visitor:profile_detail' stat.profile.slug %}" 
                               target="_blank"
                               class="group relative px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors"
                               title="–ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ—Ä–∞">
                                <span class="text-sm">üë§</span>
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
                                    –ü—Ä–æ—Ñ–∏–ª—å
                                </span>
                            </a>
                            <a href="{% url 'Visitor:view_user_cabinet' stat.author.id %}" 
                               class="group relative px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors"
                               title="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                                <span class="text-sm">üè†</span>
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
                                    –ö–∞–±–∏–Ω–µ—Ç
                                </span>
                            </a>
                            <a href="{% url 'admin:auth_user_change' stat.author.id %}" 
                               target="_blank"
                               class="group relative px-2 py-1 text-xs bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors"
                               title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ Django">
                                <span class="text-sm">‚öôÔ∏è</span>
                                <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
                                    –ê–¥–º–∏–Ω–∫–∞
                                </span>
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∏–∑ -->
    {% if stats.has_other_pages %}
    <div class="mt-4 flex justify-center">
        <nav class="flex items-center gap-2">
            {% if stats.has_previous %}
            <a href="?page=1&per_page={{ per_page }}" class="px-3 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-primary hover:text-white transition-colors text-sm">–ü–µ—Ä–≤–∞—è</a>
            <a href="?page={{ stats.previous_page_number }}&per_page={{ per_page }}" class="px-3 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm">‚Üê –ù–∞–∑–∞–¥</a>
            {% else %}
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">–ü–µ—Ä–≤–∞—è</span>
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">‚Üê –ù–∞–∑–∞–¥</span>
            {% endif %}
            
            <span class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-bold text-sm">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ stats.number }} –∏–∑ {{ stats.paginator.num_pages }}
            </span>
            
            {% if stats.has_next %}
            <a href="?page={{ stats.next_page_number }}&per_page={{ per_page }}" class="px-3 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
            <a href="?page={{ stats.paginator.num_pages }}&per_page={{ per_page }}" class="px-3 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-primary hover:text-white transition-colors text-sm">–ü–æ—Å–ª–µ–¥–Ω—è—è</a>
            {% else %}
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">–í–ø–µ—Ä—ë–¥ ‚Üí</span>
            <span class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-400 dark:text-gray-500 rounded-lg cursor-not-allowed text-sm">–ü–æ—Å–ª–µ–¥–Ω—è—è</span>
            {% endif %}
        </nav>
    </div>
    {% endif %}
</div>

