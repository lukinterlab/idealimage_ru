{% extends 'base_tailwind.html' %}
{% load static %}
{% load video_tags %}

{% block content %}
<!-- Hero Section -->
<section id="hero-section" class="relative overflow-hidden min-h-[12.5vh] md:min-h-[35vh]">
    <!-- Dynamic Background -->
    {% with bg=sections_backgrounds.hero %}
        {% if bg.type == 'image' and bg.inline_style %}
            <div class="absolute inset-0 section-bg-image" style="{{ bg.inline_style }}">
                {% if bg.overlay %}<div class="absolute inset-0" style="{{ bg.overlay }}"></div>{% endif %}
            </div>
        {% elif bg.type == 'video' and bg.video_url %}
            <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover section-bg-video">
                <source src="{{ bg.video_url }}" type="video/mp4">
            </video>
            <div class="absolute inset-x-0 top-0 h-[34%] bg-black/30"></div>
        {% elif bg.type == 'gradient' and bg.classes %}
            <div class="absolute inset-0 bg-gradient-to-br {{ bg.classes }}">
                <div class="absolute inset-0" style="background-image: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 50px 50px;"></div>
            </div>
        {% else %}
            <!-- Fallback gradient -->
            <div class="absolute inset-0 bg-gradient-to-br from-pink-500 via-purple-500 to-indigo-600 opacity-90">
                <div class="absolute inset-0" style="background-image: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 50px 50px;"></div>
            </div>
        {% endif %}
    {% endwith %}
    
    <!-- Content -->
    <div class="relative z-10 max-w-7xl mx-auto px-4 py-3 md:py-12 text-center text-white">
        <div class="flex items-center justify-center gap-6 mb-6">
            <img src="{% static 'images/logo.png' %}" 
                 alt="IdealImage.ru Logo" 
                 class="w-32 h-32 md:w-40 md:h-40 object-contain animate-slide-in-left"
                 onerror="this.style.display='none'">
            <h1 class="text-5xl md:text-7xl font-heading font-bold gradient-text-animated">
                IdealImage.ru
            </h1>
        </div>
        <p class="text-2xl md:text-3xl font-light mb-4 opacity-90 animate-fade-in animation-delay-200">
            –í–∞—à –ø—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –≤ –º–∏—Ä–µ –∫—Ä–∞—Å–æ—Ç—ã —Å AI
        </p>
        <p class="text-lg md:text-xl mb-12 opacity-80 max-w-3xl mx-auto animate-fade-in animation-delay-400">
            –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –æ –º–æ–¥–µ, –∫—Ä–∞—Å–æ—Ç–µ –∏ –∑–¥–æ—Ä–æ–≤—å–µ —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ–º –æ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞
        </p>
        
        <div class="flex flex-col md:flex-row gap-4 justify-center animate-fade-in animation-delay-600">
            <a href="{% url 'blog:post_list' %}" 
               class="px-8 py-4 bg-white text-primary font-bold text-lg rounded-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all">
                üìö –ù–∞—á–∞—Ç—å —á–∏—Ç–∞—Ç—å
            </a>
            <a href="{% url 'Visitor:apply_role' %}" 
               class="px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-lg rounded-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all">
                ‚úçÔ∏è –°—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–æ–º
            </a>
        </div>
        
        <!-- Live Stats Counter -->
        <div class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto">
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                <div class="text-4xl font-bold mb-2" data-count="{{ stats.total_posts }}">{{ stats.total_posts }}</div>
                <div class="text-sm opacity-90">–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π</div>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                <div class="text-4xl font-bold mb-2" data-count="{{ stats.total_authors }}">{{ stats.total_authors }}</div>
                <div class="text-sm opacity-90">–ê–≤—Ç–æ—Ä–æ–≤ –∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤</div>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                <div class="text-4xl font-bold mb-2" data-count="{{ stats.total_comments }}">{{ stats.total_comments }}</div>
                <div class="text-sm opacity-90">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</div>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                <div class="text-4xl font-bold mb-2" data-count="{{ stats.monthly_visitors }}">50K+</div>
                <div class="text-sm opacity-90">–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π/–º–µ—Å—è—Ü</div>
            </div>
        </div>
    </div>
</section>

<!-- Latest Posts Section -->
{% if latest_posts %}
<section class="py-16 bg-white dark:bg-gray-900">
    <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-heading font-bold text-gray-900 dark:text-white mb-3">
                üÜï –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
            </h2>
            <p class="text-lg text-gray-600 dark:text-gray-400">
                –°–≤–µ–∂–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç –Ω–∞—à–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {% for post in latest_posts %}
            <article class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all transform hover:scale-105 group">
                <div class="relative h-56 overflow-hidden">
                    {% if post.video_url|is_video %}
                        <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                            <iframe src="{{ post.video_url|video_embed }}" 
                                    class="w-full h-full"
                                    frameborder="0" 
                                    allow="autoplay; encrypted-media" 
                                    allowfullscreen
                                    loading="lazy"
                                    onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            </iframe>
                            <div style="display:none;" class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-5xl">
                                ‚ö†Ô∏è
                            </div>
                        </a>
                    {% elif post.kartinka %}
                        {% if post.kartinka.name|slice:"-4:" == ".mp4" or post.kartinka.name|slice:"-5:" == ".webm" or post.kartinka.name|slice:"-4:" == ".mov" %}
                            <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                <video src="{{ post.kartinka.url }}" 
                                       class="w-full h-full object-cover"
                                       autoplay 
                                       loop 
                                       muted 
                                       playsinline>
                                </video>
                            </a>
                        {% else %}
                            <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                <img src="{% if post.thumbnail %}{{ post.thumbnail.url }}{% else %}{{ post.kartinka.url }}{% endif %}" 
                                     alt="{{ post.title }}" 
                                     loading="lazy"
                                     decoding="async"
                                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                            </a>
                        {% endif %}
                    {% else %}
                    <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                        <div class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-5xl">
                            ‚ú®
                        </div>
                    </a>
                    {% endif %}
                    
                    <!-- Category Badge -->
                    {% if post.category %}
                    <div class="absolute top-4 left-4">
                        <span class="px-3 py-1 bg-primary text-white text-xs font-bold rounded-full">
                            {{ post.category.title }}
                        </span>
                    </div>
                    {% endif %}
                    
                    <!-- Date Badge -->
                    <div class="absolute top-4 right-4">
                        <span class="px-3 py-1 bg-black/60 backdrop-blur-sm text-white text-xs font-semibold rounded-full">
                            {{ post.created|date:"d.m.Y" }}
                        </span>
                    </div>
                </div>
                
                <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3 line-clamp-2 group-hover:text-primary transition-colors">
                        {{ post.title }}
                    </h3>
                    
                    <!-- Author -->
                    {% if post.author %}
                    <div class="flex items-center gap-2 mb-4">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-sm font-bold">
                            {{ post.author.first_name|first|default:"A" }}
                        </div>
                        <span class="text-sm text-gray-600 dark:text-gray-400">
                            {{ post.author.get_full_name|default:post.author.username }}
                        </span>
                    </div>
                    {% endif %}
                    
                    <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4">
                        <span>üëÅÔ∏è {{ post.views }}</span>
                        <span>‚ù§Ô∏è {{ post.likes_count|default:0 }}</span>
                        <span>üí¨ {{ post.comments_count|default:0 }}</span>
                    </div>
                    
                    <a href="{{ post.get_absolute_url }}" 
                       class="inline-flex items-center text-primary hover:text-secondary font-semibold transition-colors">
                        –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ
                        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'blog:post_list' %}" 
               class="inline-flex items-center px-6 py-3 bg-primary text-white font-semibold rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all">
                –í—Å–µ —Å—Ç–∞—Ç—å–∏
                <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Unique Content & AI Technology Section (–æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è) -->
<section id="features-section" class="py-4 md:py-12 relative overflow-hidden text-white min-h-[15vh] md:min-h-[45vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.features default_gradient='from-purple-600 via-indigo-600 to-blue-600' %}
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ -->
        {% comment %}
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-heading font-bold mb-4">
                üíé –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ 100% —Å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ AI
            </h2>
            <p class="text-xl opacity-90 max-w-3xl mx-auto">
                –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤—ã—Å–æ—á–∞–π—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
            </p>
        </div>
        {% endcomment %}
        
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ -->
        {% comment %}
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
            <!-- Feature 1 -->
            <div class="text-center p-8 bg-white/10 backdrop-blur-md rounded-2xl shadow-lg hover:bg-white/20 transition-all">
                <div class="text-6xl mb-4">ü§ñ</div>
                <h3 class="text-2xl font-bold mb-3">
                    AI-–ú–æ–¥–µ—Ä–∞—Ü–∏—è
                </h3>
                <p class="text-sm opacity-90">
                    –ö–∞–∂–¥–∞—è —Å—Ç–∞—Ç—å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è–º –∫–∞—á–µ—Å—Ç–≤–∞, —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—å–∑—ã –¥–ª—è —á–∏—Ç–∞—Ç–µ–ª–µ–π
                </p>
            </div>
            
            <!-- Feature 2 -->
            <div class="text-center p-8 bg-white/10 backdrop-blur-md rounded-2xl shadow-lg hover:bg-white/20 transition-all">
                <div class="text-6xl mb-4">üì∞</div>
                <h3 class="text-2xl font-bold mb-3">
                    –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                </h3>
                <p class="text-sm opacity-90">
                    –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤ –∏ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–π –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
                </p>
            </div>
            
            <!-- Feature 3 -->
            <div class="text-center p-8 bg-white/10 backdrop-blur-md rounded-2xl shadow-lg hover:bg-white/20 transition-all">
                <div class="text-6xl mb-4">‚ú®</div>
                <h3 class="text-2xl font-bold mb-3">
                    100% –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
                </h3>
                <p class="text-sm opacity-90">
                    –ú—ã –Ω–µ –ø—É–±–ª–∏–∫—É–µ–º –∫–æ–ø–∏–ø–∞—Å—Ç—É! –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞—à–∏–º–∏ –∞–≤—Ç–æ—Ä–∞–º–∏ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è AI —Å –Ω—É–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
                </p>
            </div>
        </div>
        {% endcomment %}
        
        <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
        {% comment %}
        <div class="flex items-center justify-center mb-16">
            <div class="h-px bg-white/30 flex-1 max-w-xs"></div>
            <div class="px-6">
                <div class="text-2xl">üöÄ</div>
            </div>
            <div class="h-px bg-white/30 flex-1 max-w-xs"></div>
        </div>
        {% endcomment %}
        
        <!-- AI –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –ö–∞–ª–µ–Ω–¥–∞—Ä—å (–¥–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: AI –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ -->
            <div>
                <div class="text-center mb-8">
                    <h3 class="text-3xl md:text-4xl font-heading font-bold mb-4">
                        –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã–π —Å–∞–π—Ç –±—É–¥—É—â–µ–≥–æ
                    </h3>
                    <p class="text-lg opacity-90 max-w-2xl mx-auto">
                        –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∞—Å 24/7
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all">
                        <div class="text-4xl mb-3">üß†</div>
                        <h3 class="text-xl font-bold mb-2">AI-–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</h3>
                        <p class="text-sm opacity-90">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π</p>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all">
                        <div class="text-4xl mb-3">üõ°Ô∏è</div>
                        <h3 class="text-xl font-bold mb-2">–£–º–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è</h3>
                        <p class="text-sm opacity-90">AI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—å–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ, —Ç–æ–Ω –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º</p>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all">
                        <div class="text-4xl mb-3">üîç</div>
                        <h3 class="text-xl font-bold mb-2">SEO-–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</h3>
                        <p class="text-sm opacity-90">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥–æ–π —Å—Ç–∞—Ç—å–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º</p>
                    </div>
                    
                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all">
                        <div class="text-4xl mb-3">üéØ</div>
                        <h3 class="text-xl font-bold mb-2">–£–º–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                        <p class="text-sm opacity-90">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å—Ç–∞—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤</p>
                    </div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ -->
            <div class="flex flex-col">
                <div class="text-center mb-0">
                    <h3 class="text-3xl md:text-4xl font-heading font-bold mb-4">
                        üìÖ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ —Å–µ–≥–æ–¥–Ω—è
                    </h3>
                    <p class="text-lg opacity-90 mb-0">
                        –£–∑–Ω–∞–π—Ç–µ, –∫–∞–∫–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –æ—Ç–º–µ—á–∞—é—Ç—Å—è —Å–µ–≥–æ–¥–Ω—è
                    </p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-md rounded-2xl shadow-lg hover:bg-white/20 transition-all flex items-center justify-center overflow-hidden p-[5px] scale-[1.54] self-start translate-x-[130px] translate-y-[130px]">
                    <!-- Informer www.calend.ru -->
                    <img src="https://www.calend.ru/img/export/informer.png?{{ current_date }}" 
                         alt="–ò–Ω—Ñ–æ—Ä–º–µ—Ä –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ —Å–µ–≥–æ–¥–Ω—è" 
                         title="–ü—Ä–∞–∑–¥–Ω–∏–∫–∏ —Å–µ–≥–æ–¥–Ω—è" 
                         border="0"
                         class="w-full h-full object-contain"
                         loading="lazy">
                    <!-- // Informer www.calend.ru -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Popular Categories Section -->
<section class="py-6 md:py-16 relative overflow-hidden text-white bg-gray-50 dark:bg-gray-800 min-h-[15vh] md:min-h-[55vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.categories default_gradient='from-gray-50 to-gray-100' %}
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-heading font-bold text-white mb-4">
                üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            </h2>
            <p class="text-xl text-white/90">
                –°–≤–µ–∂–∏–µ —Å—Ç–∞—Ç—å–∏ –ø–æ —Å–∞–º—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º —Ç–µ–º–∞–º
            </p>
        </div>

        <!-- –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å 3 –Ω–æ–≤—ã–º–∏ —Å—Ç–∞—Ç—å—è–º–∏ -->
        {% for category_data in categories_data %}
        {% if category_data.posts %}
        <div class="mb-16">
            <h3 class="text-3xl font-bold text-white mb-8 text-center">
                <a href="{{ category_data.category.get_absolute_url }}" class="hover:text-primary transition-colors">
                    {{ category_data.category.title }}
                </a>
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for post in category_data.posts %}
                <article class="bg-white dark:bg-gray-900 rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all transform hover:scale-105 group">
                    <div class="relative h-48 overflow-hidden">
                        {% if post.video_url|is_video %}
                            <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                <iframe src="{{ post.video_url|video_embed }}" 
                                        class="w-full h-full"
                                        frameborder="0" 
                                        allow="autoplay; encrypted-media" 
                                        allowfullscreen
                                        loading="lazy"
                                        onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                </iframe>
                                <div style="display:none;" class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-4xl">
                                    ‚ö†Ô∏è
                                </div>
                            </a>
                        {% elif post.kartinka %}
                            {% if post.kartinka.name|slice:"-4:" == ".mp4" or post.kartinka.name|slice:"-5:" == ".webm" or post.kartinka.name|slice:"-4:" == ".mov" %}
                                <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                    <video src="{{ post.kartinka.url }}" 
                                           class="w-full h-full object-cover"
                                           autoplay 
                                           loop 
                                           muted 
                                           playsinline>
                                    </video>
                                </a>
                            {% else %}
                                <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                    <img src="{% if post.thumbnail %}{{ post.thumbnail.url }}{% else %}{{ post.kartinka.url }}{% endif %}" 
                                         alt="{{ post.title }}" 
                                         loading="lazy"
                                         decoding="async"
                                         class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                                </a>
                            {% endif %}
                        {% else %}
                        <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                            <div class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-4xl">
                                üíÉ
                            </div>
                        </a>
                        {% endif %}
                    </div>
                    <div class="p-6">
                        <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-3 line-clamp-2 group-hover:text-primary transition-colors">
                            {{ post.title }}
                        </h4>
                        <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4">
                            <span>üëÅÔ∏è {{ post.views }}</span>
                            <span>‚ù§Ô∏è {{ post.likes_count|default:0 }}</span>
                        </div>
                        <a href="{{ post.get_absolute_url }}" 
                           class="inline-flex items-center text-primary hover:text-secondary font-semibold">
                            –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </a>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% endfor %}

        <div class="text-center mt-12">
            <a href="{% url 'blog:post_list' %}" 
               class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary to-secondary text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all">
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                </svg>
            </a>
        </div>
    </div>
</section>

<!-- Become a Blogger Section -->
<section id="blogger-section" class="py-2 md:py-6 relative overflow-hidden text-white bg-white dark:bg-gray-900 min-h-[7.5vh] md:min-h-[22.5vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.blogger default_gradient='from-white to-gray-50' %}
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-center">
            <div>
                <h2 class="text-4xl md:text-5xl font-heading font-bold text-white mb-3">
                    ‚úçÔ∏è –°—Ç–∞–Ω—å—Ç–µ –±–ª–æ–≥–µ—Ä–æ–º —Å AI-–ø–æ–º–æ—â–Ω–∏–∫–æ–º
                </h2>
                <p class="text-xl text-white/90 mb-4">
                    –ü–∏—à–∏—Ç–µ —Å—Ç–∞—Ç—å–∏, —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ –∞—É–¥–∏—Ç–æ—Ä–∏—é –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –¥–µ–Ω—å–≥–∏ –ø–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
                </p>
                
                <div class="space-y-3">
                    <!-- Benefit 1 -->
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center text-white text-2xl mr-4">
                            ü§ñ
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-white mb-1">AI —É–ª—É—á—à–∏—Ç –≤–∞—à–∏ —Ç–µ–∫—Å—Ç—ã</h3>
                            <p class="text-white/80">–ù–∞–ø–∏—à–∏—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫ ‚Üí AI —É–ª—É—á—à–∏—Ç —Å—Ç–∏–ª—å, –≥—Ä–∞–º–º–∞—Ç–∏–∫—É –∏ SEO ‚Üí –ü—É–±–ª–∏–∫—É–π—Ç–µ</p>
                        </div>
                    </div>
                    
                    <!-- Benefit 2 -->
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg flex items-center justify-center text-white text-2xl mr-4">
                            üí∞
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-white mb-1">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–µ</h3>
                            <p class="text-white/80">–ü–æ–ª—É—á–∞–π—Ç–µ –ø—Ä–µ–º–∏–∏ –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –ª–∞–π–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –î–æ–Ω–∞—Ç—ã –æ—Ç —á–∏—Ç–∞—Ç–µ–ª–µ–π –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤–∞–º</p>
                        </div>
                    </div>
                    
                    <!-- Benefit 3 -->
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-lg flex items-center justify-center text-white text-2xl mr-4">
                            üìä
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-white mb-1">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                            <p class="text-white/80">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å, –¥–æ—Ö–æ–¥—ã –∏ —Ä–æ—Å—Ç –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                        </div>
                    </div>
                    
                    <!-- Benefit 4 -->
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-400 to-pink-500 rounded-lg flex items-center justify-center text-white text-2xl mr-4">
                            üéì
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-white mb-1">–û–±—É—á–µ–Ω–∏–µ –æ—Ç AI</h3>
                            <p class="text-white/80">AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª—É—á—à–∏–µ —Å—Ç–∞—Ç—å–∏ —Å–∞–π—Ç–∞ –∏ —É—á–∏—Ç –≤–∞—Å –ø–∏—Å–∞—Ç—å –≤ —É—Å–ø–µ—à–Ω—ã—Ö —Å—Ç–∏–ª—è—Ö</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-5">
                    <a href="{% url 'Visitor:apply_role' %}" 
                       class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary to-secondary text-white font-bold text-xl rounded-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all">
                        –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —Ä–æ–ª—å –∞–≤—Ç–æ—Ä–∞
                        <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                    </a>
                </div>
            </div>
            
            <!-- Earning Calculator -->
            <div class="bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-2xl shadow-2xl p-3">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 text-center">
                    üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–∞ –∞–≤—Ç–æ—Ä–∞
                </h3>
                
                <div class="space-y-1.5 mb-2">
                    <!-- –°—Ç–∞—Ç–µ–π –∑–∞ –º–µ—Å—è—Ü -->
                    <div>
                        <label class="block text-sm font-medium text-gray-900 dark:text-gray-300 mb-1.5">
                            üìù –°—Ç–∞—Ç–µ–π –≤ –º–µ—Å—è—Ü
                        </label>
                        <input type="number" id="calc-posts" value="100" min="1" max="1000"
                               class="w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-center text-lg font-bold"
                               oninput="calculateEarnings()">
                    </div>
                    
                    <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –Ω–∞ —Å—Ç–∞—Ç—å—é -->
                    <div>
                        <label class="block text-sm font-medium text-gray-900 dark:text-gray-300 mb-1.5">
                            üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –Ω–∞ —Å—Ç–∞—Ç—å—é
                        </label>
                        <input type="number" id="calc-views" value="500" min="0" max="100000" step="100"
                               class="w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-center text-lg font-bold"
                               oninput="calculateEarnings()">
                    </div>
                    
                    <!-- –õ–∞–π–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å—é -->
                    <div>
                        <label class="block text-sm font-medium text-gray-900 dark:text-gray-300 mb-1.5">
                            ‚ù§Ô∏è –õ–∞–π–∫–æ–≤ –Ω–∞ —Å—Ç–∞—Ç—å—é
                        </label>
                        <input type="number" id="calc-likes" value="500" min="0" max="50000" step="10"
                               class="w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-center text-lg font-bold"
                               oninput="calculateEarnings()">
                    </div>
                    
                    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Å—Ç–∞—Ç—å—é -->
                    <div>
                        <label class="block text-sm font-medium text-gray-900 dark:text-gray-300 mb-1.5">
                            üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–∞ —Å—Ç–∞—Ç—å—é
                        </label>
                        <input type="number" id="calc-comments" value="300" min="0" max="50000" step="10"
                               class="w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-center text-lg font-bold"
                               oninput="calculateEarnings()">
                    </div>
                    
                    <!-- –£—Ä–æ–≤–µ–Ω—å –∞–≤—Ç–æ—Ä–∞ -->
                    <div>
                        <label class="block text-sm font-medium text-gray-900 dark:text-gray-300 mb-1.5">
                            üèÜ –£—Ä–æ–≤–µ–Ω—å –∞–≤—Ç–æ—Ä–∞
                        </label>
                        <select id="calc-level" 
                                class="w-full px-3 py-2 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg text-center text-base font-bold"
                                onchange="calculateEarnings()">
                            <option value="0.1">üå± –°—Ç–∞–∂—ë—Ä (1 –±–∞–ª–ª = 0,1‚ÇΩ)</option>
                            <option value="0.3" selected>‚úçÔ∏è –ê–≤—Ç–æ—Ä (1 –±–∞–ª–ª = 0,3‚ÇΩ)</option>
                            <option value="0.7">üìö –ü–∏—Å–∞—Ç–µ–ª—å (1 –±–∞–ª–ª = 0,7‚ÇΩ)</option>
                            <option value="1">üèÜ –ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä (1 –±–∞–ª–ª = 1‚ÇΩ)</option>
                        </select>
                    </div>
                </div>
                
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
                <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-2 text-white text-center mb-2">
                    <p class="text-sm opacity-90 mb-1.5">–í–∞—à –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥</p>
                    <p class="text-4xl font-bold" id="earnings-result">108 000‚ÇΩ</p>
                    <p class="text-sm opacity-75 mt-1.5">–≤ –º–µ—Å—è—Ü (–ø—Ä–µ–º–∏–∏ + –¥–æ–Ω–∞—Ç—ã –æ—Ç —á–∏—Ç–∞—Ç–µ–ª–µ–π)</p>
                </div>
                
                <!-- –§–æ—Ä–º—É–ª–∞ -->
                <div class="p-1.5 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                    <p class="text-sm text-blue-900 dark:text-blue-300 leading-relaxed">
                        üí° <strong>–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞:</strong> 1 —Å—Ç–∞—Ç—å—è = 100 –±–∞–ª–ª–æ–≤ + 1 –ø—Ä–æ—Å–º–æ—Ç—Ä = 1 –±–∞–ª–ª + 1 –ª–∞–π–∫ = 3 –±–∞–ª–ª–∞ + 1 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π = 5 –±–∞–ª–ª–æ–≤.<br>
                        <strong>–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:</strong> –°—Ç–∞–∂—ë—Ä (1 –±–∞–ª–ª = 0,1‚ÇΩ) ‚Ä¢ –ê–≤—Ç–æ—Ä (1 –±–∞–ª–ª = 0,3‚ÇΩ) ‚Ä¢ –ü–∏—Å–∞—Ç–µ–ª—å (1 –±–∞–ª–ª = 0,7‚ÇΩ) ‚Ä¢ –ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä (1 –±–∞–ª–ª = 1‚ÇΩ)<br>
                        <span class="text-xs opacity-75">–ü—Ä–µ–º–∏–∏ + –¥–æ–Ω–∞—Ç—ã –æ—Ç —á–∏—Ç–∞—Ç–µ–ª–µ–π!</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- üèÜ –¢–æ–ø –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π -->
<section class="py-6 md:py-16 relative overflow-hidden text-white bg-white dark:bg-gray-900 min-h-[15vh] md:min-h-[55vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.top_posts default_gradient='from-white to-gray-50' %}
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-heading font-bold text-white mb-3">
                üèÜ –¢–æ–ø –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
            </h2>
        </div>
        
        <!-- Carousel Container -->
        <div class="relative">
            <!-- Carousel Track -->
            <div class="overflow-hidden">
                <div id="top-posts-carousel" class="flex transition-transform duration-500 ease-in-out">
                    {% for post in top_posts %}
                    <div class="flex-shrink-0 px-2 carousel-slide">
                        <article class="bg-white dark:bg-gray-900 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all transform hover:scale-105 group">
                            <!-- Image/Video -->
                            <div class="relative h-36 flex-shrink-0 overflow-hidden">
                                {% if post.video_url|is_video %}
                                    <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                        <iframe src="{{ post.video_url|video_embed }}" 
                                                class="w-full h-full"
                                                frameborder="0" 
                                                allow="autoplay; encrypted-media" 
                                                allowfullscreen
                                                loading="lazy"
                                                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                        </iframe>
                                        <div style="display:none;" class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-2xl">
                                            ‚ö†Ô∏è
                                        </div>
                                    </a>
                                {% elif post.kartinka %}
                                    {% if post.kartinka.name|slice:"-4:" == ".mp4" or post.kartinka.name|slice:"-5:" == ".webm" or post.kartinka.name|slice:"-4:" == ".mov" %}
                                        <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                            <video src="{{ post.kartinka.url }}" 
                                                   class="w-full h-full object-cover"
                                                   autoplay 
                                                   loop 
                                                   muted 
                                                   playsinline>
                                            </video>
                                        </a>
                                {% else %}
                                    <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                        <img src="{% if post.thumbnail %}{{ post.thumbnail.url }}{% else %}{{ post.kartinka.url }}{% endif %}" 
                                             alt="{{ post.title }}" 
                                             loading="lazy"
                                             decoding="async"
                                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                                    </a>
                                {% endif %}
                                {% else %}
                                <a href="{{ post.get_absolute_url }}" class="block w-full h-full">
                                    <div class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-2xl">
                                        ‚ú®
                                    </div>
                                </a>
                                {% endif %}
                            </div>
                            
                            <!-- Content -->
                            <div class="p-3 flex-1 flex flex-col justify-between">
                                <div>
                                    <h3 class="text-sm font-bold text-gray-900 dark:text-white mb-2 line-clamp-3 group-hover:text-primary transition-colors carousel-title">
                                        {{ post.title }}
                                    </h3>
                                    
                                    <div class="flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400 mb-2">
                                        <span class="flex items-center gap-1">
                                            üëÅÔ∏è {{ post.views }}
                                        </span>
                                        <span class="flex items-center gap-1">
                                            ‚ù§Ô∏è {{ post.likes_count|default:0 }}
                                        </span>
                                    </div>
                                </div>
                                
                                <a href="{{ post.get_absolute_url }}" 
                                   class="inline-flex items-center text-xs text-primary hover:text-secondary font-semibold">
                                    –ß–∏—Ç–∞—Ç—å
                                    <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </a>
                            </div>
                        </article>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Navigation Buttons -->
            <button id="carousel-prev" 
                    class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-4 rounded-full shadow-xl hover:shadow-2xl transition-all hover:scale-110 z-20">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            <button id="carousel-next" 
                    class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-4 rounded-full shadow-xl hover:shadow-2xl transition-all hover:scale-110 z-20">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
        
        <!-- Carousel Indicators & Counter -->
        <div class="flex flex-col items-center gap-4 mt-8">
            <div id="carousel-indicators" class="flex justify-center gap-2">
                <!-- Indicators will be generated by JS -->
            </div>
            <div id="carousel-counter" class="text-sm font-medium text-white/80">
                <!-- Counter will be generated by JS -->
            </div>
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'blog:post_list' %}" 
               class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-primary to-secondary text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all">
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å—Ç–∞—Ç—å–∏
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                </svg>
            </a>
        </div>
    </div>
</section>

<!-- üí£ –†–µ–∫–ª–∞–º–∞ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ  -->
<section class="py-6 md:py-16 relative overflow-hidden text-white min-h-[15vh] md:min-h-[55vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.advertising default_gradient='from-orange-500 via-red-500 to-pink-600' %}
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-heading font-bold mb-4">
                üí£ –†–µ–∫–ª–∞–º–∞ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ - —ç—Ç–æ AI-–±–æ–º–±–∞!
            </h2>
            <p class="text-xl opacity-90 max-w-3xl mx-auto">
                –¢–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 text-center">
                <div class="text-5xl font-bold mb-2">85%</div>
                <p class="text-sm opacity-90">–ñ–µ–Ω—Å–∫–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è 18-45</p>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 text-center">
                <div class="text-5xl font-bold mb-2">50K+</div>
                <p class="text-sm opacity-90">–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤ –º–µ—Å—è—Ü</p>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 text-center">
                <div class="text-5xl font-bold mb-2">AI</div>
                <p class="text-sm opacity-90">–¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º</p>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 text-center">
                <div class="text-5xl font-bold mb-2">24/7</div>
                <p class="text-sm opacity-90">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
            </div>
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'Home:advertising' %}" 
               class="inline-flex items-center px-8 py-4 bg-white text-primary font-bold text-xl rounded-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all">
                –†–∞–∑–º–µ—Å—Ç–∏—Ç—å —Ä–µ–∫–ª–∞–º—É
                <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                </svg>
            </a>
        </div>
    </div>
</section>


<!-- –¶–µ–ª–∞—è —Å–µ—Ç—å –ø–æ—Ä—Ç–∞–ª–æ–≤ -->
<section class="py-6 md:py-16 relative overflow-hidden text-white bg-gray-50 dark:bg-gray-800 min-h-[15vh] md:min-h-[55vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.network default_gradient='from-gray-50 to-gray-100' %}
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-heading font-bold text-white mb-4">
                üåê –¶–µ–ª–∞—è —Å–µ—Ç—å –ø–æ—Ä—Ç–∞–ª–æ–≤
            </h2>
            <p class="text-xl text-white/90">
                IdealImage.ru - —á–∞—Å—Ç—å —Ä–∞–∑–≤–∏—Ç–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤
            </p>
        </div>
        
        {% if portals %}
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for portal in portals %}
            <div class="group relative bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all transform hover:scale-105 {% if portal.is_main %}border-4 border-primary{% else %}border-2 border-gray-200 dark:border-gray-700{% endif %}">
                <!-- Portal Image -->
                <div class="relative h-48 overflow-hidden">
                    {% if portal.image %}
                    <img src="{{ portal.image.url }}" 
                         alt="{{ portal.name }}" 
                         loading="lazy"
                         class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                    {% else %}
                    <!-- Fallback gradient if no image -->
                    <div class="w-full h-full bg-gradient-to-br {% if portal.is_main %}from-pink-500 via-purple-500 to-indigo-600{% else %}from-gray-400 to-gray-600{% endif %} flex items-center justify-center">
                        <span class="text-white text-6xl">{{ portal.get_icon }}</span>
                    </div>
                    {% endif %}
                    
                    <!-- Overlay with Portal Name -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent flex flex-col justify-end p-4">
                        <h3 class="text-xl font-bold text-white mb-1">
                            {{ portal.name }}
                        </h3>
                        {% if portal.is_main %}
                        <span class="inline-flex items-center px-3 py-1 bg-primary text-white rounded-full text-xs font-bold w-fit">
                            üëë –ì–ª–∞–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª
                        </span>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Portal Content -->
                <div class="p-4">
                    <p class="text-sm text-gray-700 dark:text-gray-300 mb-4 line-clamp-2">
                        {{ portal.description }}
                    </p>
                    
                    <a href="{{ portal.url }}" 
                       target="_blank"
                       rel="noopener noreferrer"
                       class="inline-flex items-center justify-center w-full px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white font-semibold rounded-lg hover:shadow-lg transform hover:scale-105 transition-all">
                        –ü–µ—Ä–µ–π—Ç–∏
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                        </svg>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <!-- Placeholder –µ—Å–ª–∏ –ø–æ—Ä—Ç–∞–ª–æ–≤ –Ω–µ—Ç -->
        <div class="text-center py-16">
            <div class="text-6xl mb-4">üåê</div>
            <h3 class="text-2xl font-bold text-white mb-4">
                –ü–æ—Ä—Ç–∞–ª—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
            </h3>
            <p class="text-white/80 mb-6">
                –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞—à–µ–π —Å–µ—Ç–∏
            </p>
            <div class="max-w-md mx-auto bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6">
                <p class="text-sm text-blue-900 dark:text-blue-300">
                    üí° <strong>–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:</strong> –î–æ–±–∞–≤—å—Ç–µ –ø–æ—Ä—Ç–∞–ª—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –≤ —Ä–∞–∑–¥–µ–ª–µ "üåê –ü–æ—Ä—Ç–∞–ª—ã (–°–µ—Ç—å)"
                </p>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- CTA Section -->
<section class="py-6 md:py-16 relative overflow-hidden text-white min-h-[15vh] md:min-h-[55vh]">
    {% include 'home/partials/section_background.html' with bg=sections_backgrounds.cta default_gradient='from-primary to-secondary' %}
    <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
        <h2 class="text-4xl md:text-5xl font-heading font-bold mb-6">
            –ì–æ—Ç–æ–≤—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è?
        </h2>
        <p class="text-xl opacity-90 mb-10">
            –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–≤–æ—ë –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –º–∏—Ä –∫—Ä–∞—Å–æ—Ç—ã –∏ —Å—Ç–∏–ª—è!
        </p>
        
        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <a href="{% url 'Visitor:user-register' %}" 
               class="px-10 py-5 bg-white text-primary font-bold text-xl rounded-lg shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all">
                –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </a>
            <a href="{% url 'Visitor:user-login' %}" 
               class="px-10 py-5 bg-white/20 backdrop-blur-md text-white font-bold text-xl rounded-lg shadow-xl hover:bg-white/30 transition-all">
                –í—Ö–æ–¥
            </a>
        </div>
    </div>
</section>

<!-- Animations -->
<style>
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–∫–∞—Ç—ã–≤–∞–Ω–∏—è –ª–æ–≥–æ—Ç–∏–ø–∞ —Å –ª–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã */
@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-100px) rotate(-10deg) scale(0.5);
    }
    to {
        opacity: 1;
        transform: translateX(0) rotate(0deg) scale(1);
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–ª–∏–≤–∞—é—â–µ–≥–æ—Å—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

.animate-slide-in-left {
    animation: slideInLeft 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

.gradient-text-animated {
    background: linear-gradient(
        90deg,
        #ff6b9d,
        #ffc371,
        #ff6b9d,
        #c471ed,
        #f64f59,
        #ff6b9d
    );
    background-size: 300% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradientShift 4s ease-in-out infinite;
    text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
}

.animate-fade-in {
    animation: fadeIn 0.8s ease-out forwards;
}

.animation-delay-200 {
    animation-delay: 0.2s;
    opacity: 0;
}

.animation-delay-400 {
    animation-delay: 0.4s;
    opacity: 0;
}

.animation-delay-600 {
    animation-delay: 0.6s;
    opacity: 0;
}

.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Carousel Styles */
#top-posts-carousel {
    will-change: transform;
}

/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∏ —à–∏—Ä–∏–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
.carousel-slide {
    width: 200px !important; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
    min-width: 200px !important;
    max-width: 200px !important;
}

.carousel-slide article {
    height: 280px;
    width: 100%;
    display: flex;
    flex-direction: column;
}

.carousel-slide article .relative {
    flex-shrink: 0;
}

.carousel-slide article > div:last-child {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 767px) {
    .carousel-slide {
        width: 180px !important;
        min-width: 180px !important;
        max-width: 180px !important;
    }
    
    .carousel-slide article {
        height: 300px; /* –ß—É—Ç—å –±–æ–ª—å—à–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }
}

/* line-clamp –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}

.carousel-title {
    min-height: 3.6em; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
    max-height: 3.6em;
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 767px) {
    /* –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    #carousel-prev,
    #carousel-next {
        display: none;
    }
    
    /* –î–µ–ª–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –º–µ–Ω—å—à–µ */
    #carousel-indicators button {
        transform: scale(0.8);
    }
    
    /* –£–º–µ–Ω—å—à–∞–µ–º —Å—á—ë—Ç—á–∏–∫ */
    #carousel-counter {
        font-size: 0.75rem;
    }
}

/* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
#carousel-prev,
#carousel-next {
    transition: all 0.3s ease;
}

#carousel-prev:hover,
#carousel-next:hover {
    transform: translateY(-50%) scale(1.1);
}

/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ –Ω–∞ —Ç–µ–º–Ω–æ–º —Ñ–æ–Ω–µ */
@media (min-width: 768px) {
    #carousel-prev,
    #carousel-next {
        opacity: 0.8;
    }
    
    #carousel-prev:hover,
    #carousel-next:hover {
        opacity: 1;
    }
}
</style>

<!-- Earnings Calculator Script -->
<script>
function calculateEarnings() {
    // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª–µ–π
    const posts = parseInt(document.getElementById('calc-posts').value) || 0;
    const viewsPerPost = parseInt(document.getElementById('calc-views').value) || 0;
    const likesPerPost = parseInt(document.getElementById('calc-likes').value) || 0;
    const commentsPerPost = parseInt(document.getElementById('calc-comments').value) || 0;
    const level = parseFloat(document.getElementById('calc-level').value) || 0.3;
    
    // –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –±–∞–ª–ª–æ–≤:
    // 1 —Å—Ç–∞—Ç—å—è = 100 –±–∞–ª–ª–æ–≤
    // 1 –ø—Ä–æ—Å–º–æ—Ç—Ä = 1 –±–∞–ª–ª (—É–º–Ω–æ–∂–∞–µ–º –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π)
    // 1 –ª–∞–π–∫ = 3 –±–∞–ª–ª–∞ (—É–º–Ω–æ–∂–∞–µ–º –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π)
    // 1 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π = 5 –±–∞–ª–ª–æ–≤ (—É–º–Ω–æ–∂–∞–µ–º –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π)
    
    const pointsPosts = posts * 100;
    const pointsViews = posts * viewsPerPost * 1;
    const pointsLikes = posts * likesPerPost * 3;
    const pointsComments = posts * commentsPerPost * 5;
    
    const totalPoints = pointsPosts + pointsViews + pointsLikes + pointsComments;
    
    // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –±–∞–ª–ª–æ–≤ –≤ —Ä—É–±–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –∞–≤—Ç–æ—Ä–∞:
    // –°—Ç–∞–∂—ë—Ä: 1 –±–∞–ª–ª = 0,1‚ÇΩ
    // –ê–≤—Ç–æ—Ä: 1 –±–∞–ª–ª = 0,3‚ÇΩ
    // –ü–∏—Å–∞—Ç–µ–ª—å: 1 –±–∞–ª–ª = 0,7‚ÇΩ
    // –ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä: 1 –±–∞–ª–ª = 1‚ÇΩ
    
    const earnings = Math.round(totalPoints * level);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    document.getElementById('earnings-result').textContent = earnings.toLocaleString('ru-RU') + '‚ÇΩ';
}

// Auto-play background videos
function initBackgroundVideos() {
    const videos = document.querySelectorAll('video[autoplay]');
    
    videos.forEach(video => {
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º –≤–∏–¥–µ–æ
        video.play().catch(error => {
            console.log('–ê–≤—Ç–æ–ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –±—Ä–∞—É–∑–µ—Ä–æ–º:', error);
            
            // –ü—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.addEventListener('click', function playOnInteraction() {
                video.play().catch(err => console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–µ–æ:', err));
                document.removeEventListener('click', playOnInteraction);
            }, { once: true });
            
            // –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
            document.addEventListener('scroll', function playOnScroll() {
                video.play().catch(err => console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–µ–æ:', err));
                document.removeEventListener('scroll', playOnScroll);
            }, { once: true });
        });
        
        // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤–∏–¥–µ–æ –∑–∞—Ü–∏–∫–ª–µ–Ω–æ
        video.addEventListener('ended', function() {
            this.currentTime = 0;
            this.play();
        });
    });
}

// Top Posts Carousel - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∫–∞—Ä—É—Å–µ–ª—å
class TopPostsCarousel {
    constructor() {
        this.carousel = document.getElementById('top-posts-carousel');
        if (!this.carousel) return;
        
        this.prevBtn = document.getElementById('carousel-prev');
        this.nextBtn = document.getElementById('carousel-next');
        this.indicatorsContainer = document.getElementById('carousel-indicators');
        
        this.originalSlides = Array.from(this.carousel.children);
        this.totalSlides = this.originalSlides.length;
        this.currentIndex = 0;
        this.isTransitioning = false;
        
        this.init();
    }
    
    getCardWidth() {
        // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
        return window.innerWidth < 768 ? 180 : 200;
    }
    
    getSlidesPerView() {
        // –ü—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∫–æ–ª—å–∫–æ –≤–ª–µ–∑–∞–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω
        const containerWidth = this.carousel.parentElement.offsetWidth;
        const cardWidth = this.getCardWidth();
        const count = Math.floor(containerWidth / cardWidth);
        
        console.log(`üì± –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: ${containerWidth}px, –ö–∞—Ä—Ç–æ—á–∫–∞: ${cardWidth}px ‚Üí ${count} —Å—Ç–∞—Ç–µ–π`);
        return Math.max(1, count); // –ú–∏–Ω–∏–º—É–º 1
    }
    
    init() {
        this.slidesPerView = this.getSlidesPerView();
        
        // –ö–ª–æ–Ω–∏—Ä—É–µ–º —Å–ª–∞–π–¥—ã –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        this.cloneSlides();
        this.createIndicators();
        this.updateCarousel(false);
        
        // Event listeners –¥–ª—è –∫–Ω–æ–ø–æ–∫
        if (this.prevBtn) {
            this.prevBtn.addEventListener('click', () => {
                this.stopAutoplay();
                this.prev();
                this.startAutoplay();
            });
        }
        
        if (this.nextBtn) {
            this.nextBtn.addEventListener('click', () => {
                this.stopAutoplay();
                this.next();
                this.startAutoplay();
            });
        }
        
        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        this.carousel.addEventListener('mouseenter', () => {
            this.stopAutoplay();
        });
        
        this.carousel.addEventListener('mouseleave', () => {
            this.startAutoplay();
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è transition
        this.carousel.addEventListener('transitionend', (e) => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ transform transition
            if (e.propertyName === 'transform') {
                this.isTransitioning = false;
                
                // –ë–µ—Å—à–æ–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
                if (this.currentIndex >= this.totalSlides) {
                    this.currentIndex = 0;
                    this.updateCarousel(false);
                } else if (this.currentIndex < 0) {
                    this.currentIndex = this.totalSlides - 1;
                    this.updateCarousel(false);
                }
            }
        });
        
        // –°—Ç—Ä–∞—Ö–æ–≤–∫–∞: –µ—Å–ª–∏ transition –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ 500ms
        setInterval(() => {
            if (this.isTransitioning) {
                this.isTransitioning = false;
            }
        }, 500);
        
        // –ü–µ—Ä–µ—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                const oldSlidesPerView = this.slidesPerView;
                this.slidesPerView = this.getSlidesPerView();
                
                if (oldSlidesPerView !== this.slidesPerView) {
                    this.stopAutoplay();
                    // –ü–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º –∫–∞—Ä—É—Å–µ–ª—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–∞–π–¥–æ–≤
                    this.carousel.innerHTML = '';
                    this.originalSlides.forEach(slide => {
                        this.carousel.appendChild(slide.cloneNode(true));
                    });
                    this.originalSlides = Array.from(this.carousel.children);
                    this.totalSlides = this.originalSlides.length;
                    this.currentIndex = 0;
                    this.cloneSlides();
                    this.createIndicators();
                    this.updateCarousel(false);
                    this.startAutoplay();
                }
            }, 250);
        });
        
        // –°–≤–∞–π–ø—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
        this.initTouchEvents();
        
        // –í–ê–ñ–ù–û: –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        setTimeout(() => {
            this.startAutoplay();
            console.log('‚úÖ –ö–∞—Ä—É—Å–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
            console.log(`üìä –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ${this.slidesPerView} —Å—Ç–∞—Ç–µ–π –∏–∑ ${this.totalSlides} –æ–±—â–∏—Ö`);
        }, 100);
    }
    
    cloneSlides() {
        // –ö–ª–æ–Ω–∏—Ä—É–µ–º —Å–ª–∞–π–¥—ã –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        const cloneCount = Math.max(10, this.slidesPerView); // –ö–ª–æ–Ω–∏—Ä—É–µ–º –±–æ–ª—å—à–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
        
        // –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ª–∞–π–¥—ã –≤ –Ω–∞—á–∞–ª–æ
        for (let i = this.totalSlides - cloneCount; i < this.totalSlides; i++) {
            const clone = this.originalSlides[i].cloneNode(true);
            this.carousel.insertBefore(clone, this.carousel.firstChild);
        }
        
        // –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ —Å–ª–∞–π–¥—ã –≤ –∫–æ–Ω–µ—Ü
        for (let i = 0; i < cloneCount; i++) {
            const clone = this.originalSlides[i].cloneNode(true);
            this.carousel.appendChild(clone);
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –ø–∏–∫—Å–µ–ª—è—Ö (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
        this.currentIndex = 0;
        const cardWidth = this.getCardWidth();
        this.carousel.style.transform = `translateX(-${cloneCount * cardWidth}px)`;
        this.cloneCount = cloneCount;
    }
    
    startAutoplay() {
        this.stopAutoplay();
        // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ - –∫–∞–∂–¥—É—é 1 —Å–µ–∫—É–Ω–¥—É
        this.autoplay = setInterval(() => {
            if (!this.isTransitioning) {
                this.next();
            }
        }, 1000); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–∞—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
        console.log('üîÑ –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫)');
    }
    
    stopAutoplay() {
        if (this.autoplay) {
            clearInterval(this.autoplay);
            this.autoplay = null;
            console.log('‚è∏Ô∏è –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
        }
    }
    
    createIndicators() {
        if (!this.indicatorsContainer) return;
        
        this.indicatorsContainer.innerHTML = '';
        // –°–æ–∑–¥–∞—ë–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–ª–∞–π–¥–æ–≤
        const totalPages = Math.ceil(this.totalSlides / this.slidesPerView);
        for (let i = 0; i < totalPages; i++) {
            const indicator = document.createElement('button');
            indicator.className = `h-3 rounded-full transition-all ${
                i === this.currentIndex 
                    ? 'w-8 bg-primary' 
                    : 'w-3 bg-gray-300 dark:bg-gray-600 hover:bg-primary/50'
            }`;
            indicator.addEventListener('click', () => this.goToSlide(i));
            this.indicatorsContainer.appendChild(indicator);
        }
    }
    
    updateCarousel(animate = true) {
        if (animate) {
            // –ë—ã—Å—Ç—Ä—ã–π –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∑–∞ 0.4 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏
            this.carousel.style.transition = 'transform 0.4s linear';
        } else {
            this.carousel.style.transition = 'none';
        }
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ –≤ –ø–∏–∫—Å–µ–ª—è—Ö (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–µ–∫)
        const cardWidth = this.getCardWidth();
        const offset = -(this.currentIndex + this.cloneCount) * cardWidth;
        this.carousel.style.transform = `translateX(${offset}px)`;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
        const indicators = this.indicatorsContainer?.children;
        if (indicators) {
            // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            const normalizedIndex = ((this.currentIndex % this.totalSlides) + this.totalSlides) % this.totalSlides;
            const currentPage = Math.floor(normalizedIndex / this.slidesPerView);
            
            Array.from(indicators).forEach((indicator, index) => {
                if (index === currentPage) {
                    indicator.className = 'h-3 w-8 bg-primary rounded-full transition-all';
                } else {
                    indicator.className = 'h-3 w-3 bg-gray-300 dark:bg-gray-600 hover:bg-primary/50 rounded-full transition-all';
                }
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞
        const counter = document.getElementById('carousel-counter');
        if (counter) {
            const displayIndex = ((this.currentIndex % this.totalSlides) + this.totalSlides) % this.totalSlides;
            const startItem = displayIndex + 1;
            let endItem = Math.min(displayIndex + 1, this.totalSlides);
            
            counter.textContent = `–°—Ç–∞—Ç—å—è ${startItem} –∏–∑ ${this.totalSlides}`;
        }
    }
    
    next() {
        if (this.isTransitioning) return;
        this.isTransitioning = true;
        this.currentIndex++;
        this.updateCarousel(true);
    }
    
    prev() {
        if (this.isTransitioning) return;
        this.isTransitioning = true;
        this.currentIndex--;
        this.updateCarousel(true);
    }
    
    goToSlide(index) {
        if (this.isTransitioning) return;
        this.stopAutoplay();
        this.isTransitioning = true;
        this.currentIndex = index;
        this.updateCarousel(true);
        this.startAutoplay();
    }
    
    initTouchEvents() {
        let startX = 0;
        let isDragging = false;
        
        this.carousel.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            isDragging = true;
            this.stopAutoplay();
        });
        
        this.carousel.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é
        });
        
        this.carousel.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            isDragging = false;
            
            const endX = e.changedTouches[0].clientX;
            const diff = startX - endX;
            
            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    this.next();
                } else {
                    this.prev();
                }
            }
            
            this.startAutoplay();
        });
    }
}

// Initialize on load
document.addEventListener('DOMContentLoaded', function() {
    calculateEarnings();
    initBackgroundVideos();
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—É—Å–µ–ª—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    setTimeout(() => {
        const carousel = new TopPostsCarousel();
        console.log('üé† –ö–∞—Ä—É—Å–µ–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(() => {
            if (!carousel.autoplay) {
                console.warn('‚ö†Ô∏è –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º...');
                carousel.startAutoplay();
            }
        }, 1000);
    }, 200);
});
</script>
{% endblock %}

