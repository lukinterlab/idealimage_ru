# ✅ ФИНАЛ - 3 карточки для баннеров в статьях

**Дата:** 23 октября 2025  
**Версия:** 3.2 ФИНАЛ  
**Статус:** ✅ ВЫПОЛНЕНО

---

## 🎯 Что реализовано

### Баннеры с 3 карточками (в статьях):
1. **in_post_middle** — В середине статьи
2. **before_article_content** — Перед текстом статьи
3. **after_comments** — После комментариев

### Баннеры с 4 карточками:
1. **header_banner** — Баннер в шапке
2. **footer_banner** — Баннер в футере

### Остальные баннеры (обычные):
1. sidebar_top
2. popup_modal
3. ticker_line
4. sidebar_after_author
5. sidebar_after_popular

---

## 📊 Визуальная схема

### HEADER И FOOTER (4 карточки):

```
┌────────────────────────────────────────┐
│ ┌────┐┌────┐┌────┐┌────┐             │
│ │ 📸││ 🎥││ 🎨││ ✨│  ← 4 карточки│
│ └────┘└────┘└────┘└────┘             │
└────────────────────────────────────────┘
```

### В СТАТЬЯХ (3 карточки):

```
┌────────────────────────────┐
│ ┌────┐┌────┐┌────┐        │
│ │ 📸││ 🎥││ 🎨│  ← 3 карточки
│ └────┘└────┘└────┘        │
└────────────────────────────┘
```

**Места:**
- В середине статьи (in_post_middle)
- Перед текстом статьи (before_article_content)
- После комментариев (after_comments)

---

## 🔧 Изменения в коде

### 1. `advertising/templatetags/ad_tags.py`

**Добавлено:**
- Условие для 3-карточных баннеров (строки 315-327)
- `grid-template-columns: repeat(3, 1fr)` — ровно 3 колонки
- Gap: 5px, Padding: 10px (как у header/footer)

**Логика:**
```python
if place.code in ['in_post_middle', 'before_article_content', 'after_comments']:
    # Рендерим 3 карточки
    card1, card2, card3
    grid-template-columns: repeat(3, 1fr)
    
elif place.code in ['header_banner', 'footer_banner']:
    # Рендерим 4 карточки
    card1, card2, card3, card4
    grid-template-columns: repeat(4, 1fr)
    
else:
    # Стандартный баннер
```

### 2. `advertising/management/commands/setup_my_campaign.py`

**Изменено:**
- Добавлено 3 места в список с пустым HTML (строка 145)
- Эти баннеры будут рендериться динамически через карточки

---

## 🎨 Параметры карточек

### Одинаковые для всех:
- Gap между карточками: **5px**
- Padding контейнера: **10px**
- Высота: **120px** (по умолчанию)
- Настраивается: **50-300px**
- БЕЗ border вокруг изображений/видео

### Градиенты (автоматические):
- Карточка 1: Фиолетовый (#667eea → #764ba2)
- Карточка 2: Розово-красный (#f093fb → #f5576c)
- Карточка 3: Голубой (#4facfe → #00f2fe)
- Карточка 4: Розово-желтый (только для header/footer)

---

## 📋 Как редактировать

### В админке Django:

**Для баннера "В середине статьи":**
1. Открыть `/admin/advertising/adbanner/`
2. Выбрать "В середине статьи"
3. Развернуть секции:
   - Карточка 1 (для header/footer)
   - Карточка 2 (для header/footer)
   - Карточка 3 (для header/footer)
   - ~~Карточка 4~~ — не используется для этого баннера
4. Настроить каждую карточку:
   - Тип: Изображение / Видео / Текст
   - Загрузить файл (если нужно)
   - Заголовок и текст
5. Высота баннера: 120px (или от 50 до 300)
6. Сохранить

**Аналогично для:**
- "Перед текстом статьи" (before_article_content)
- "После комментариев" (after_comments)

---

## 🎯 Примеры использования

### Вариант 1: 3 изображения

**В середине статьи:**
- Карточка 1: Изображение → Фото товара 1
- Карточка 2: Изображение → Фото товара 2
- Карточка 3: Изображение → Фото товара 3

### Вариант 2: Микс контента

**Перед текстом статьи:**
- Карточка 1: Изображение → Баннер акции
- Карточка 2: Видео → Промо-ролик
- Карточка 3: Текст → ✨ "Скидка" "До 50%"

### Вариант 3: Текстовые (по умолчанию)

**После комментариев:**
- Карточка 1: Текст → 📸 "Галерея" "Смотрите"
- Карточка 2: Текст → 🎥 "Видео" "Уроки"
- Карточка 3: Текст → ✨ "Стиль" "Тренды"

---

## 🧪 Где смотреть на сайте

### Страница статьи:
```
https://idealimage.ru/blog/post/любая-статья/

┌─────────────────────────────────────┐
│ [HEADER - 4 карточки]               │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ ПЕРЕД ТЕКСТОМ - 3 карточки          │
│ ┌────┐┌────┐┌────┐                 │
│ │ 📸││ 🎥││ 🎨│                  │
│ └────┘└────┘└────┘                 │
└─────────────────────────────────────┘

[ТЕКСТ СТАТЬИ...]

┌─────────────────────────────────────┐
│ В СЕРЕДИНЕ - 3 карточки             │
│ ┌────┐┌────┐┌────┐                 │
│ │ 📸││ 🎥││ 🎨│                  │
│ └────┘└────┘└────┘                 │
└─────────────────────────────────────┘

[ПРОДОЛЖЕНИЕ ТЕКСТА...]

[КОММЕНТАРИИ]

┌─────────────────────────────────────┐
│ ПОСЛЕ КОММЕНТАРИЕВ - 3 карточки     │
│ ┌────┐┌────┐┌────┐                 │
│ │ 📸││ 🎥││ 🎨│                  │
│ └────┘└────┘└────┘                 │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ [FOOTER - 4 карточки]               │
└─────────────────────────────────────┘
```

---

## 📦 Итоговое распределение

### 4 карточки (2 баннера):
- header_banner ✅
- footer_banner ✅

### 3 карточки (3 баннера):
- in_post_middle ✅
- before_article_content ✅
- after_comments ✅

### Обычные баннеры (5 баннеров):
- sidebar_top
- popup_modal
- ticker_line
- sidebar_after_author
- sidebar_after_popular

**Итого:** 10 баннеров

---

## 🚀 Загрузка на сервер

### Обновленные файлы (2 шт.):

1. ✅ `advertising/templatetags/ad_tags.py`
   - Добавлено условие для 3-карточных баннеров
   - Строки 315-327

2. ✅ `advertising/management/commands/setup_my_campaign.py`
   - Добавлено 3 места в список с пустым HTML
   - Строка 145

### На сервере:

```bash
# Загрузить файлы, затем:
python manage.py setup_my_campaign
touch restart.txt
```

**Миграции НЕ нужны** — используем существующие поля card1-3!

---

## ✅ Результат

**Теперь:**
- Header и Footer — **4 карточки**
- В середине статьи — **3 карточки**
- Перед текстом статьи — **3 карточки**
- После комментариев — **3 карточки**

**Всё остальное:**
- Gap: 5px
- Padding: 10px
- Высота настраивается
- БЕЗ border вокруг изображений
- Загрузка через админку

**Один в один как header/footer, только 3 карточки вместо 4!** ✅

---

*Дата: 23.10.2025*  
*Версия: 3.2 - 3 карточки в статьях*

